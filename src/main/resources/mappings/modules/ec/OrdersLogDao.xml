<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.training.modules.ec.dao.OrdersLogDao">

	<sql id="acountLogColunm">
		a.ol_id,
		a.order_id,
		a.user_id,
		a.operator,
		a.pay_code,
		b.pay_name,
		a.add_time,
		a.ip_address,
		a.temp_order_id
	</sql>
	<sql id="acountJion">
		LEFT JOIN mtmydb.mtmy_payment b ON b.pay_code=a.pay_code
	</sql>

	<select id="findByOrderid" resultType="OrdersLog">
		SELECT
		<include refid="acountLogColunm"></include>
		FROM
		mtmydb.mtmy_orders_log a
		<include refid="acountJion"></include>
		where a.order_id=#{orderid}
		ORDER BY a.add_time desc

	</select>

</mapper>